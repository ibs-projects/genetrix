<style>
    .col-4 {
        margin-bottom: 18px;
    }

    .modal-body {
        font-size: 14px;
        color: blue;
    }
    ._legende{
        cursor:pointer;
    }
    .mt_17{
        margin-top:-17px;
    }
    #minmax:hover{
        background-color:#f5c9ac;
        color:black;
    }
</style>
<link href="~/assets/libs/ion-rangeslider/css/ion.rangeSlider.min.css" rel="stylesheet" type="text/css" />

<div class="modal fade" id="model-recherche" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" style="text-align:center!important;">
        <div class="modal-content badge p-0" style="text-align: left !important; position: center; border: 4px solid #2689a6; border-top: none">
            <div class="modal-header m-0" style="background-color: #2689a6">
                <h5 class="modal-title mt-0 text-white" id="staticBackdropLabel"><i class="fa fa-search"></i> Recherche avancée</h5>
                <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-4 ligne1">
                        <label for="sel_fournisseurs"><i class="mdi mdi-account"></i> Fournisseurs</label>
                        <select class="form-control" id="sel_fournisseurs" name="sel_fournisseurs">
                            <option value="value"></option>
                        </select>
                    </div>
                    <div class="col-4 ligne1">
                        <label for="sel_devises"><i class="mdi mdi-currency-usd"></i> Devise</label>
                        <select class="form-control" id="sel_devises" name="sel_devises">
                            <option value=""></option>
                            @{
                                foreach (var item in ViewBag.DevisesMonetaire)
                                {
                                    <option value="@(item.Id)">@(item.Nom)</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="col-4 ligne1" id="pan-montant">
                        <div class="mt_17" id="pan-minmax">
                            <div class="col-12 minmax">
                                <label for="inp_montant_min" id="minmontant-lab" style="font-weight:bold;"><i class="mdi mdi-numeric"></i> Montant </label><span id="minmax" class="btn mdi mdi-plus affiche"></span>
                                <input type="text" id="inp_montant_min" class="form-control valided" name="inp_montant_min" value="" />
                                <span class="text-danger" id="lab_montant_min"></span>
                            </div>
                            <div class="col-6 minmax" id="maxmontant" style="display:none;margin-top:17px">
                                <label for="inp_montant_max" style="font-weight:bold"><i class="mdi mdi-numeric"></i> Montant maximum</label>
                                <input type="text" id="inp_montant_max" class="form-control valided" name="inp_montant_max" value="" />
                                <span class="text-danger" id="lab_montant_max"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <fieldset class="p-1 mt-4" style="border:1px solid #d8d0d0">
                    <legend class="_legende mdi mdi-chevron-right-box" _id="pan-1" style="margin-top:-15px;font-size:1em;font-weight:bolder"> <span style="background-color: white;"> Période de traitement</span></legend>
                    <div class="mt-2 pan-actions1" id="pan-1" style="padding-bottom:0px;margin-top:15px;padding:8px">
                        <span>&bull; Date de début</span>
                        <div class="row" style="margin-top: 15px; padding-left: 25px ">
                            <div class="col-4">
                                <label for="inp_jour_trait1"><i class="mdi mdi-calendar-range"></i> Jour</label>
                                <input type="number" id="inp_jour_trait1" min="1" max="31" class="form-control" name="inp_jour_trait1" value="" />
                            </div>
                            <div class="col-4">
                                <label for="inp_mois_trait1"><i class="mdi mdi-calendar-range"></i> Mois</label>
                                <select class="form-control" id="inp_mois_trait1" name="inp_mois_trait1">
                                    <option></option>
                                    <option value="1">Janvier</option>
                                    <option value="2">Févier</option>
                                    <option value="3">Mars</option>
                                    <option value="4">Avril</option>
                                    <option value="5">Mai</option>
                                    <option value="6">Juin</option>
                                    <option value="7">Juillet</option>
                                    <option value="8">Août</option>
                                    <option value="9">Septembre</option>
                                    <option value="10">Octobre</option>
                                    <option value="11">Novembre</option>
                                    <option value="12">décembre</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <label for="inp_annee_trait1"><i class="mdi mdi-calendar-range"></i> Année</label>
                                <select class="form-control" id="inp_annee_trait1" name="inp_annee_trait1">
                                    <option value=""></option>
                                    @{
                                        foreach (var item in ViewBag.annees)
                                        {
                                            <option value="@(item)">@(item)</option>
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                        <span>&bull; Date de fin</span>
                        <div class="row" style="padding-bottom:0px;margin-top:15px;padding-left:25px">
                            <div class="col-4">
                                <label for="inp_jour_trait2"><i class="mdi mdi-calendar-range"></i> Jour</label>
                                <input type="number" id="inp_jour_trait2" min="1" max="31" class="form-control" name="inp_jour_trait2" value="" />
                            </div>
                            <div class="col-4">
                                <label for="inp_mois_trait2"><i class="mdi mdi-calendar-range"></i> Mois</label>
                                <select class="form-control" id="inp_mois_trait2" name="inp_mois_trait2">
                                    <option></option>
                                    <option value="1">Janvier</option>
                                    <option value="2">Févier</option>
                                    <option value="3">Mars</option>
                                    <option value="4">Avril</option>
                                    <option value="5">Mai</option>
                                    <option value="6">Juin</option>
                                    <option value="7">Juillet</option>
                                    <option value="8">Août</option>
                                    <option value="9">Septembre</option>
                                    <option value="10">Octobre</option>
                                    <option value="11">Novembre</option>
                                    <option value="12">décembre</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <label for="inp_annee_trait2"><i class="mdi mdi-calendar-range"></i> Année</label>
                                <select class="form-control" id="inp_annee_trait2" name="inp_annee_trait2">
                                    <option value=""></option>
                                    @{
                                        foreach (var item in ViewBag.annees)
                                        {
                                            <option value="@(item)">@(item)</option>
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="border border-1 p-1 mt-4 hidden">
                    <legend class="_legende mdi mdi-chevron-right-box" _id="pan-1" style="margin-top:-15px;font-size:1em;font-weight:bolder"> <span style="background-color: white;"> Date d'archivage</span></legend>
                    <div class="row mt-2 pan-actions" id="pan-1" style="padding-bottom:0px">
                        <div class="col-4">
                            <label for="inp_annee_arch" class="mdi mdi-calendar-range"> Année</label>
                            <select class="form-control" id="inp_annee_arch" name="inp_annee_arch">
                                <option value=""></option>
                                @{
                                    foreach (var item in ViewBag.annees)
                                    {
                                        <option value="@(item)">@(item)</option>
                                    }
                                }
                            </select>
                        </div>
                        <div class="col-4">
                            <label for="inp_mois_arch" class="mdi mdi-calendar-range"> Mois</label>
                            <select class="form-control" id="inp_mois_arch" name="inp_mois_arch">
                                <option></option>
                                <option value="1">Janvier</option>
                                <option value="2">Févier</option>
                                <option value="3">Mars</option>
                                <option value="4">Avril</option>
                                <option value="5">Mai</option>
                                <option value="6">Juin</option>
                                <option value="7">Juillet</option>
                                <option value="8">Août</option>
                                <option value="9">Septembre</option>
                                <option value="10">Octobre</option>
                                <option value="11">Novembre</option>
                                <option value="12">décembre</option>
                            </select>
                        </div>
                        <div class="col-4">
                            <label for="inp_jour_arch" class="mdi mdi-calendar-range"> Jour</label>
                            <input type="number" id="inp_jour_arch" min="1" max="31" class="form-control" name="inp_jour_arch" value="" />
                        </div>
                    </div>
                </fieldset>
                <fieldset class="border border-1 p-1 mt-4 hidden">
                    <legend class="_legende mdi mdi-chevron-right-box" _id="pan-2" style="margin-top:-15px;font-size:1em;font-weight:bolder"> <span style="background-color: white;"> Date de dépôt à la banque</span></legend>
                    <div class="row mt-2 pan-actions" id="pan-2" style="padding-bottom:0px">
                        <div class="col-4">
                            <label for="inp_annee_depot" class="mdi mdi-calendar-range"> Année</label>
                            <select class="form-control" id="inp_annee_depot" name="inp_annee_depot">
                                <option value=""></option>
                                @{
                                    foreach (var item in ViewBag.annees)
                                    {
                                        <option value="@(item)">@(item)</option>
                                    }
                                }
                            </select>
                        </div>
                        <div class="col-4">
                            <label for="inp_mois_depot" class="mdi mdi-calendar-range"> Mois</label>
                            <select class="form-control" id="inp_mois_depot" name="inp_mois_depot">
                                <option></option>
                                <option value="1">Janvier</option>
                                <option value="2">Févier</option>
                                <option value="3">Mars</option>
                                <option value="4">Avril</option>
                                <option value="5">Mai</option>
                                <option value="6">Juin</option>
                                <option value="7">Juillet</option>
                                <option value="8">Août</option>
                                <option value="9">Septembre</option>
                                <option value="10">Octobre</option>
                                <option value="11">Novembre</option>
                                <option value="12">décembre</option>
                            </select>
                        </div>
                        <div class="col-4">
                            <label for="inp_jour_depot" class="mdi mdi-calendar-range"> Jour</label>
                            <input type="number" id="inp_jour_depot" min="1" max="31" class="form-control" name="inp_jour_depot" value="" />
                        </div>
                    </div>
                </fieldset>
                <button type="button" id="btn-cherche" value="-2" class="btn btn-primary float-end mt-2"><i class="fa fa-search"></i> Chercher</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<a href="#" id="link-cherche" class="hidden"></a>
<script>
    try {
        // control des champs
        document.getElementById('inp_montant_max').addEventListener('input', function () {
            var min1 = "" + document.getElementById('inp_montant_min').value;
            var max1 = "" + this.value;
            max1 = max1.replace(',', '.');
            min1 = min1.replace(',', '.');
            var max = parseFloat(max1);
            var min = parseFloat(min1);
            if (min >= max) {
                document.getElementById('lab_montant_max').textContent = "Valeur minimum " + document.getElementById('inp_montant_min').value;
            } else {
                document.getElementById('lab_montant_max').textContent = "";
            }
        });
        document.getElementById('inp_montant_min').addEventListener('input', function () {
            var max1 = "" + document.getElementById('inp_montant_max').value;
            var min1 = "" + this.value;
            max1 = max1.replace(',', '.');
            min1 = min1.replace(',', '.');
            var max = parseFloat(max1);
            var min = parseFloat(min1);
            if (max > 0 && min >= max) {
                document.getElementById('lab_montant_min').textContent = "Valeur maxmimum " + document.getElementById('inp_montant_max').value;
            } else {
                document.getElementById('lab_montant_min').textContent = "";
            }
        });
    } catch (e) {
        alert(e)
    }
    try {
        //submit
        document.getElementById('btn-cherche').addEventListener('click', function () {
        var url = '@Url.Content("~/archivage2/Index")'
            + '?idFournisseur=' + document.getElementById('sel_fournisseurs').value
            + '&idDevise=' + document.getElementById('sel_devises').value
            + '&montant_min=' + document.getElementById('inp_montant_min').value
            + '&montant_max=' + document.getElementById('inp_montant_max').value
            + '&annee_arch=' + document.getElementById('inp_annee_arch').value
            + '&mois_arch=' + document.getElementById('inp_mois_arch').value
            + '&jour_arch=' + document.getElementById('inp_jour_arch').value
            + '&annee_depot=' + document.getElementById('inp_annee_depot').value
            + '&mois_depot=' + document.getElementById('inp_mois_depot').value
            + '&jour_depot=' + document.getElementById('inp_jour_depot').value

            + '&annee_trait1=' + document.getElementById('inp_annee_trait1').value
            + '&mois_trait1=' + document.getElementById('inp_mois_trait1').value
            + '&jour_trait1=' + document.getElementById('inp_jour_trait1').value

             + '&annee_trait2=' + document.getElementById('inp_annee_trait2').value
            + '&mois_trait2=' + document.getElementById('inp_mois_trait2').value
            + '&jour_trait2=' + document.getElementById('inp_jour_trait2').value

            + '&estRecherche=True';
        document.getElementById('link-cherche').setAttribute('href', url);
        document.getElementById('link-cherche').click();
    });
    } catch (e) {

    }
</script>
