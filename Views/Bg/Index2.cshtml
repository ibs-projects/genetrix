@using genetrix.Models;
@model genetrix.Models.ePub
@{
    Layout = null;
}
<link rel="shortcut icon" href="../favicon.ico">
<style>
    @@font-face {
        font-family: 'BebasNeueRegular';
        src: url('fonts/BebasNeue-webfont.eot');
        src: url('fonts/BebasNeue-webfont.eot?#iefix') format('embedded-opentype'), url('fonts/BebasNeue-webfont.woff') format('woff'), url('fonts/BebasNeue-webfont.ttf') format('truetype'), url('fonts/BebasNeue-webfont.svg#BebasNeueRegular') format('svg');
        font-weight: normal;
        font-style: normal;
    }

    /* CSS reset */
    body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, fieldset, input, textarea, p, blockquote, th, td {
        margin: 0;
        padding: 0;
    }

    html, body {
        margin: 0;
        padding: 0;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    fieldset, img {
        border: 0;
    }

    input {
        border: 1px solid #b0b0b0;
        padding: 3px 5px 4px;
        color: #979797;
        width: 190px;
    }

    address, caption, cite, code, dfn, th, var {
        font-style: normal;
        font-weight: normal;
    }

    ol, ul {
        list-style: none;
    }

    caption, th {
        text-align: left;
    }

    h1, h2, h3, h4, h5, h6 {
        font-size: 100%;
        font-weight: normal;
    }

    q:before, q:after {
        content: '';
    }

    abbr, acronym {
        border: 0;
    }
    /* General Demo Style */
    body {
        font-family: Constantia, Palatino, "Palatino Linotype", "Palatino LT STD", Georgia, serif;
        background: #000;
        font-weight: 400;
        font-size: 15px;
        color: #aa3e03;
        overflow-y: scroll;
        overflow-x: hidden;
    }

    .ie7 body {
        overflow: hidden;
    }

    a {
        color: #333;
        text-decoration: none;
    }

    .container {
        position: relative;
        text-align: center;
    }

    .clr {
        clear: both;
    }

    .container > header {
        padding: 30px 30px 10px 20px;
        margin: 0px 20px 10px 20px;
        position: relative;
        display: block;
        text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
        text-align: left;
    }

        .container > header h1 {
            font-family: 'BebasNeueRegular', 'Arial Narrow', Arial, sans-serif;
            font-size: 35px;
            line-height: 35px;
            position: relative;
            font-weight: 400;
            color: #fff;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.3);
            padding: 0px 0px 5px 0px;
        }

            .container > header h1 span {
            }

        .container > header h2, p.info {
            font-size: 16px;
            font-style: italic;
            color: #f8f8f8;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.6);
        }
    /* Header Style */
    .codrops-top {
        font-family: Arial, sans-serif;
        line-height: 24px;
        font-size: 11px;
        width: 100%;
        background: #000;
        opacity: 0.9;
        text-transform: uppercase;
        z-index: 9999;
        position: relative;
        -moz-box-shadow: 1px 0px 2px #000;
        -webkit-box-shadow: 1px 0px 2px #000;
        box-shadow: 1px 0px 2px #000;
    }

        .codrops-top a {
            padding: 0px 10px;
            letter-spacing: 1px;
            color: #ddd;
            display: block;
            float: left;
        }

            .codrops-top a:hover {
                color: #fff;
            }

        .codrops-top span.right {
            float: right;
        }

            .codrops-top span.right a {
                float: none;
                display: inline;
            }

    p.codrops-demos {
        display: block;
        padding: 15px 0px;
    }

        p.codrops-demos a,
        p.codrops-demos a.current-demo,
        p.codrops-demos a.current-demo:hover {
            display: inline-block;
            border: 1px solid #6d0019;
            padding: 4px 10px 3px;
            font-size: 13px;
            line-height: 18px;
            margin: 2px 3px;
            font-weight: 800;
            -webkit-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
            -moz-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
            box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
            color: #fff;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            background: #a90329;
            background: -moz-linear-gradient(top, #a90329 0%, #8f0222 44%, #6d0019 100%);
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#a90329), color-stop(44%,#8f0222), color-stop(100%,#6d0019));
            background: -webkit-linear-gradient(top, #a90329 0%,#8f0222 44%,#6d0019 100%);
            background: -o-linear-gradient(top, #a90329 0%,#8f0222 44%,#6d0019 100%);
            background: -ms-linear-gradient(top, #a90329 0%,#8f0222 44%,#6d0019 100%);
            background: linear-gradient(top, #a90329 0%,#8f0222 44%,#6d0019 100%);
        }

            p.codrops-demos a:hover {
                background: #6d0019;
            }

            p.codrops-demos a:active {
                background: #6d0019;
                background: -moz-linear-gradient(top, #6d0019 0%, #8f0222 56%, #a90329 100%);
                background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6d0019), color-stop(56%,#8f0222), color-stop(100%,#a90329));
                background: -webkit-linear-gradient(top, #6d0019 0%,#8f0222 56%,#a90329 100%);
                background: -o-linear-gradient(top, #6d0019 0%,#8f0222 56%,#a90329 100%);
                background: -ms-linear-gradient(top, #6d0019 0%,#8f0222 56%,#a90329 100%);
                background: linear-gradient(top, #6d0019 0%,#8f0222 56%,#a90329 100%);
                -webkit-box-shadow: 0px 1px 1px rgba(255,255,255,0.9);
                -moz-box-shadow: 0px 1px 1px rgba(255,255,255,0.9);
                box-shadow: 0px 1px 1px rgba(255,255,255,0.9);
            }

            p.codrops-demos a.current-demo,
            p.codrops-demos a.current-demo:hover {
                color: #A5727D;
                background: #6d0019;
            }
    /* Media Queries */
    @@media screen and (max-width: 767px) {
        .container > header {
            text-align: center;
        }

        p.codrops-demos {
            position: relative;
            top: auto;
            left: auto;
        }
    }
</style>
<style>
    .cb-slideshow,
.cb-slideshow:after {
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0px;
    left: 0px;
    z-index: 0;
}
.cb-slideshow:after {
    content: '';
    background: transparent url('@Url.Content("~/assets/images/IU/login-img/pattern.png")') repeat top left;
}
.cb-slideshow li span {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    color: transparent;
    background-size: cover;
    background-position: 50% 50%;
    background-repeat: none;
    opacity: 0;
    z-index: 0;
	-webkit-backface-visibility: hidden;
    -webkit-animation: imageAnimation 36s linear infinite 0s;
    -moz-animation: imageAnimation 36s linear infinite 0s;
    -o-animation: imageAnimation 36s linear infinite 0s;
    -ms-animation: imageAnimation 36s linear infinite 0s;
    animation: imageAnimation 36s linear infinite 0s;
}
.cb-slideshow li div {
    z-index: 1000;
    position: absolute;
    bottom: 30px;
    left: 0px;
    width: 100%;
    text-align: center;
    opacity: 0;
    color: #fff;
    -webkit-animation: titleAnimation 36s linear infinite 0s;
    -moz-animation: titleAnimation 36s linear infinite 0s;
    -o-animation: titleAnimation 36s linear infinite 0s;
    -ms-animation: titleAnimation 36s linear infinite 0s;
    animation: titleAnimation 36s linear infinite 0s;
}
.cb-slideshow li div h3 {
    font-family: 'BebasNeueRegular', 'Arial Narrow', Arial, sans-serif;
    font-size: 240px;
    padding: 0;
    line-height: 200px;
}
.cb-slideshow li:nth-child(1) span {
    background-image: url('@Url.Content("~/assets/images/IU/login-img/1.jpg")')
}
.cb-slideshow li:nth-child(2) span {
    background-image: url(../images/2.jpg);
    -webkit-animation-delay: 6s;
    -moz-animation-delay: 6s;
    -o-animation-delay: 6s;
    -ms-animation-delay: 6s;
    animation-delay: 6s;
}
.cb-slideshow li:nth-child(3) span {
    background-image: url('@Url.Content("~/assets/images/IU/login-img/1.jpg")');
    -webkit-animation-delay: 12s;
    -moz-animation-delay: 12s;
    -o-animation-delay: 12s;
    -ms-animation-delay: 12s;
    animation-delay: 12s;
}
.cb-slideshow li:nth-child(4) span {
    background-image: url('@Url.Content("~/assets/images/IU/login-img/1.jpg")');
    -webkit-animation-delay: 18s;
    -moz-animation-delay: 18s;
    -o-animation-delay: 18s;
    -ms-animation-delay: 18s;
    animation-delay: 18s;
}
.cb-slideshow li:nth-child(5) span {
    background-image: url('@Url.Content("~/assets/images/IU/login-img/1.jpg")');
    -webkit-animation-delay: 24s;
    -moz-animation-delay: 24s;
    -o-animation-delay: 24s;
    -ms-animation-delay: 24s;
    animation-delay: 24s;
}
.cb-slideshow li:nth-child(6) span {
    background-image: url('@Url.Content("~/assets/images/IU/login-img/1.jpg")');
    -webkit-animation-delay: 30s;
    -moz-animation-delay: 30s;
    -o-animation-delay: 30s;
    -ms-animation-delay: 30s;
    animation-delay: 30s;
}
.cb-slideshow li:nth-child(2) div {
    -webkit-animation-delay: 6s;
    -moz-animation-delay: 6s;
    -o-animation-delay: 6s;
    -ms-animation-delay: 6s;
    animation-delay: 6s;
}
.cb-slideshow li:nth-child(3) div {
    -webkit-animation-delay: 12s;
    -moz-animation-delay: 12s;
    -o-animation-delay: 12s;
    -ms-animation-delay: 12s;
    animation-delay: 12s;
}
.cb-slideshow li:nth-child(4) div {
    -webkit-animation-delay: 18s;
    -moz-animation-delay: 18s;
    -o-animation-delay: 18s;
    -ms-animation-delay: 18s;
    animation-delay: 18s;
}
.cb-slideshow li:nth-child(5) div {
    -webkit-animation-delay: 24s;
    -moz-animation-delay: 24s;
    -o-animation-delay: 24s;
    -ms-animation-delay: 24s;
    animation-delay: 24s;
}
.cb-slideshow li:nth-child(6) div {
    -webkit-animation-delay: 30s;
    -moz-animation-delay: 30s;
    -o-animation-delay: 30s;
    -ms-animation-delay: 30s;
    animation-delay: 30s;
}
/* Animation for the slideshow images */
@@-webkit-keyframes imageAnimation {
    0% { opacity: 0.9;
    -webkit-animation-timing-function: ease-in; }
    8% { opacity: 1;
         -webkit-animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0.9 }
    100% { opacity: 0.9 }
}
@@-moz-keyframes imageAnimation {
    0% { opacity: 0.9;
    -moz-animation-timing-function: ease-in; }
    8% { opacity: 1;
         -moz-animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0.9 }
    100% { opacity: 0.9 }
}
@@-o-keyframes imageAnimation {
    0% { opacity: 0.9;
    -o-animation-timing-function: ease-in; }
    8% { opacity: 1;
         -o-animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0.9 }
    100% { opacity: 0.9 }
}
@@-ms-keyframes imageAnimation {
    0% { opacity: 0.9;
    -ms-animation-timing-function: ease-in; }
    8% { opacity: 1;
         -ms-animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0.9 }
    100% { opacity: 0.9 }
}
@@keyframes imageAnimation {
    0% { opacity: 0.9;
    animation-timing-function: ease-in; }
    8% { opacity: 1;
         animation-timing-function: ease-out; }
    17% { opacity: 1 }
    25% { opacity: 0.9 }
    100% { opacity: 0.9 }
}
/* Animation for the title */
@@-webkit-keyframes titleAnimation {
    0% { opacity: 0 }
    8% { opacity: 1 }
    17% { opacity: 1 }
    19% { opacity: 0 }
    100% { opacity: 0 }
}
@@-moz-keyframes titleAnimation {
    0% { opacity: 0 }
    8% { opacity: 1 }
    17% { opacity: 1 }
    19% { opacity: 0 }
    100% { opacity: 0 }
}
@@-o-keyframes titleAnimation {
    0% { opacity: 0 }
    8% { opacity: 1 }
    17% { opacity: 1 }
    19% { opacity: 0 }
    100% { opacity: 0 }
}
@@-ms-keyframes titleAnimation {
    0% { opacity: 0 }
    8% { opacity: 1 }
    17% { opacity: 1 }
    19% { opacity: 0 }
    100% { opacity: 0 }
}
@@keyframes titleAnimation {
    0% { opacity: 0 }
    8% { opacity: 1 }
    17% { opacity: 1 }
    19% { opacity: 0 }
    100% { opacity: 0 }
}
/* Show at least something when animations not supported */
.no-cssanimations .cb-slideshow li span{
	opacity: 1;
}

@@media screen and (max-width: 1140px) {
    .cb-slideshow li div h3 { font-size: 30px }
/*    h3 {
        font-size: 3em !important;
    }*/
}
@@media screen and (max-width: 600px) {
    .cb-slideshow li div h3 { font-size: 10px }
   /* h3 {
        font-size: 1em !important;
    }*/
}
h3{
    font-size:4em!important;
    line-height:90%!important
}
    .comp-left{
        position:relative;
        left:0;
    }
    .col-center{
        text-align:center
    }
    .vertical-center {
        margin: 0;
        position: absolute;
        top: 50%;
        -ms-transform: translateY(-50%);
        transform: translateY(-50%);
    }
    .center {
        margin: 0;
        position: absolute;
        top: 90%;
        width:350px;
        height:230px;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
    }
    .left1 {
        left: 35%;
    }
    .right1{
        left:69%;
    }
</style>
@{
    try
    {
        if (Model.Etat == 1 && false)
        {
            @Html.Partial("~/Views/_Shared/_head_css.cshtml")
        }
    }
    catch (Exception)
    { }
}
<link href="~/assets/pub.css" rel="stylesheet" />
<script type="text/javascript" src="~/Views/Bg/js/modernizr.custom.86080.js"></script>
<div id="page">
    <ul class="cb-slideshow">

        @{
            bool affiche = true;
            try
            {
                if (Model.CardBottom)
                {
                    var pubItemsBas = new List<PubItem>();
                    try
                    {
                        pubItemsBas = ViewBag.pubItemsBas as List<PubItem>;
                    }
                    catch
                    { }
                    if (pubItemsBas == null)
                    {
                        pubItemsBas = new List<PubItem>();
                    }
                    int ii = 0;
                    if (pubItemsBas.Count > 0)
                    {
                        while (ii < 6)
                        {
                            foreach (var item in pubItemsBas)
                            {
                                affiche = false;
                                ii++;
                                <li><span>@item.Titre</span><div><h3>@item.Description</h3></div></li>
                                if (ii > 6)
                                {
                                    break;
                                }
                            }
                        }
                    }

                }
            }
            catch
            { }
            if (affiche)
            {
                <li><span>Image 01</span><div><h3></h3></div></li>
            }
        }
        @*<li><span>Image 01</span><div><h3>Votre solution de gestion des apurements</h3></div></li>
            <li><span>Image 02</span><div><h3>Workflow transfert</h3></div></li>
            <li><span>Image 03</span><div><h3>Retrouver plus rapidement un dossier spécifique e n cas de contrôle.</h3></div></li>
            <li><span>Image 04</span><div><h3>Gestion des délais d'apurement d'un dossier</h3></div></li>
            <li><span>Image 05</span><div><h3>Le rappel sur la documentation manquante</h3></div></li>
            <li><span>Image 06</span><div><h3>Stocker et classer vos dossiers de transfert</h3></div></li>*@
    </ul>
    <div class="container bg-danger">
        <!-- Codrops top bar -->
        <div class="codrops-top">
            <div class="clr">
            </div>
        </div><!--/ Codrops top bar -->
    </div>

</div>

<script>
    //function myFunction(x) {
    //    if (x.matches) { // If media query matches
    //        document.body.style.backgroundColor = "yellow";
    //        alert("petit")
    //    } else {
    //        document.body.style.backgroundColor = "pink";
    //        alert("grand")
    //    }
    //}

    //var x = window.matchMedia("(max-width: 600px)")
    //myFunction(x)
    //x.addListener(myFunction)
</script>
@{
    if (Model != null)
    {
        try
        {
            if (Model.Etat == 1)
            {
                <iframe src="" class="center1 left12 poste" allowtransparency="true" id="left-pub" themes="" tmp="" nbr="0" time="@Model.DelaitAttCG" time2="" pub-id="" theme="" height="@Model.HeigthCG" width="@Model.WidhtCG" style="height:@(Model.HeigthCG+"px");width:@(Model.WidhtCG+"px");border:none;position:fixed;left:0;bottom:0;margin-left:10px;margin-bottom:10px">Indisponible</iframe>
                <iframe src="" class="center1 right12 poste" allowtransparency="true" id="rigth-pub" themes="" tmp="" nbr="0" time="@Model.DelaitAttCD" time2="" pub-id="" theme="" height="@Model.HeigthCD" width="@Model.WidhtCD" style="height:@(Model.HeigthCD+"px");width:@(Model.WidhtCD+"px");border:none;position:fixed;right:0;bottom:0;margin-right:10px;margin-bottom:10px">Indisponible</iframe>

                @Html.Partial("~/Views/_Shared/_Script_DataList.cshtml")
<script>
                    var dico = {}
                    var dicoPubId = {}
                    var indexDico = 0;
                    var keysValues = "";
                    $(document).ready(function () {
                        fpub();
                    });

    function fpub() {
                            $.ajax({
                                url: '@Url.Content("~/pubs/GetPub")',
                                success: function (res) {
                                   var cardleft = '@(Model.CardLeft)' == "True", cardrigth = '@(Model.CardRigth)' == "True";

                                    if (res.length>0) {
                                        var balance = true;
                                        if (cardleft && cardrigth) {
                                            balance = false;
                                        }
                                        $.each(res, function (index, pub) {
                                            if (balance && cardleft) {
                                                $("#left-pub").attr('theme', pub.Theme);
                                                $("#left-pub").attr('pub-id', pub.Id);
                                                if (keysValues) {
                                                    keysValues += ";" + pub.Id + '+' + pub.Theme + "+" + "left-pub";
                                                    var tmp=$("#left-pub").attr('tmp');
                                                    $("#left-pub").attr('tmp', tmp + ';' + pub.Id + '+' + pub.Theme + '+' + pub.DureeApp);
                                                } else {
                                                    keysValues = pub.Id + '+' + pub.Theme + "+" + "left-pub";
                                                    $("#left-pub").attr('tmp', pub.Id + '+' + pub.Theme + '+' + pub.DureeApp);
                                                }
                                            }
                                            else if (cardrigth) {
                                                $("#rigth-pub").attr('theme', pub.Theme);
                                                $("#rigth-pub").attr('pub-id', pub.Id);
                                                if (keysValues) {
                                                    keysValues += ";" + pub.Id + '+' + pub.Theme + "+" + "rigth-pub";
                                                    var tmp = $("#rigth-pub").attr('tmp');
                                                    $("#rigth-pub").attr('tmp', tmp + ';' + pub.Id + '+' + pub.Theme + '+' + pub.DureeApp);
                                                } else {
                                                    keysValues = pub.Id + '+' + pub.Theme + "+" + "rigth-pub";
                                                    $("#rigth-pub").attr('tmp', pub.Id + '+' + pub.Theme + '+' + pub.DureeApp);
                                                }
                                            }
                                            if (cardleft && cardrigth) {
                                                balance = !balance;
                                            }
                                        });
                                        try {
                                            if (cardleft) {
                                                loadData1('left-pub', $("#left-pub").attr('pub-id'), $("#left-pub").attr('theme'));
                                            }
                                            if (cardrigth) {
                                                loadData1('rigth-pub', $("#rigth-pub").attr('pub-id'), $("#rigth-pub").attr('theme'));                                            }
                                        } catch (e) {

                                        }
                                    }
                                },
                                error: function (responce) {alert("erreur") }
                            })
                        };

                    function loadData1(frameId, pubId, pubTheme, frameh, framew) {
                        //alert("theme1: "+pubTheme)
                        if (pubTheme) {
                            var tmp = $('#' + frameId).attr('tmp');
                            $('#' + frameId).attr('src', '@Url.Content("~/pubs/themes?idPubItem=")' + pubId + '&themeName=' + pubTheme + "&cards=" + tmp + "&width=" + framew + "&heigth=" + frameh + "&frameId=" + frameId);
                            var theme = $("#" + frameId).attr('themes');

                            if (theme) {
                                if (!theme.includes(pubTheme)) {//ajout 08-03-2022
                                    //alert("theme2: " + pubTheme)
                                    $('#' + frameId).attr('themes', theme + ';' + pubTheme);
                                }
                            } else {
                                $('#' + frameId).attr('themes', pubTheme);
                            }
                        }
                    }
                    try {
                        var iframes = $("iframe");
                        var _time = 0;
                        for (var i = 0; i < iframes.length; i++) {
                            iframes[i].onload = function () {
                                _time = this.getAttribute('time');
                                try {
                                    if (this.getAttribute('time2')) {
                                        _time = Number(this.getAttribute('time2'))
                                        if (_time > 0) {
                                            _time = this.getAttribute('time2')
                                        } else {
                                            _time = this.getAttribute('time');
                                        }
                                    }
                                } catch (e) {

                                }
                                if (!_time) {
                                    _time = 20000;
                                }
                                setTimeout(setDataFrame, _time, this);
                            };
                        }

                    } catch (e) {

                    }
                    function setDataFrame(elt) {
                        try {
                            var nbr = Number(elt.getAttribute('nbr'));
                            var idthif = elt.getAttribute('tmp').split(';');
                            //alert("nbr: "+nbr + " - split: " + idthif)
                            if (nbr >= idthif.length) {
                                nbr = 0;
                            }
                            var _id = idthif[nbr].split('+')[0];
                            var _theme = idthif[nbr].split('+')[1];
                            //Ajout le 03-03-2022: Durée de la transition personnalisée
                            try {
                                var nbr1 = nbr++;
                                if (nbr1 >= idthif.length) {
                                    nbr1 = 0;
                                }
                                var _time2 = idthif[nbr1].split('+')[2];
                                if (!_time2 || _time2 == 0) {
                                    //alert(_time2 + ' - ' + elt.getAttribute('time'))
                                    _time2 = elt.getAttribute('time');
                                }
                                $(elt).attr('time2', _time2);
                            } catch (e) {

                            }
                            $(elt).attr('src', '');
                            loadData1(elt.getAttribute('id'), _id, _theme);
                            nbr++;
                            elt.setAttribute('nbr', nbr);
                            var h = elt.getAttribute('height'), w = elt.getAttribute('width');
                            elt.style.height = h + "px";
                            elt.style.width = w + "px";
                        } catch (e) {
                            //alert(e)
                        }

                    }
</script>
            }
        }
        catch (Exception)
        { }
    }
}
<iframe src="~/pubs/ThemeInterne?rg=2" style="width: 100% !important; height: 310px !important; margin: 0px; padding: 0px; border: none; outline: none; box-sizing: border-box; position: fixed; inset: 0px 0px auto auto !important; overflow: hidden; z-index: 2147483647; min-width: 240px !important; display: block !important; max-width: 413px !important;"></iframe>
<script>
    document.body.style.overflow = 'hidden';
</script>
